<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Document</title>

  <!-- Latest compiled and minified CSS -->
  <link rel="stylesheet" type="text/css" href="assets/air-datepicker/dist/css/datepicker.min.css">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/3.3.0/css/bootstrap.min.css">
<link rel="stylesheet" href="css/app.css">
<style>

body {
    /* font-family: "Helvetica Neue",Helvetica,Arial,sans-serif; */
    font-size: 14px;
    /* line-height: 1.42857143; */
    /* color: #333; */
   background: none;
}


  .pac-container:after {
        /* Disclaimer: not needed to show 'powered by Google' if also a Google Map is shown */

        background-image: none !important;
        height: 0px;
      }

      #map {
        width: 100%;
        height: 200px;
        background: #eaeaea;
      }

      #drop-off p {
        text-align: left;
        margin-top: 10px;
        font-size: 13px;
      }

      .info-text {
        color: #2C3E50;
      }

      .info-text-default {
        color: darkgrey;
      }

      textarea {
        resize: none;
      }

      .left-col {
        float: left;
        width: 20%;
       
        margin-left: 40px;
        position: absolute;
        height: 80%;

        background: white;
        border: 0 none;
        border-radius: 3px;
        box-shadow: 0 0 15px 1px rgba(0, 0, 0, 0.4);
        padding: 20px 30px;
        box-sizing: border-box;
   
        

      }

      .right-col {
        float: right;
        width: 85%;
      }
    

      .car-card .car-photo img {
        max-width: 189px;
        max-height: 121px;
      }

      .car-card .car-prices {
        float: right;
        text-align: right;
      }

      .car-card {
        text-align: left;
        border: 2px solid #eaeaea;
      }

      .car-card .car-title {
        text-align: center;
        font-size: 28px;
        font-weight: bold;
      }
</style>
</head>
<body>

<div class="container">
    
  <ul id="progressbar">
    <li class="active">Departure</li>
    <li>Arrival</li>
    <li>Pick a Car</li>
    <li>Personal Details</li>
    <li>Review & Submit</li>
    <li>Payment</li>
  </ul>

  <div class="left-col">
    <h2>Transfer Booking Details</h2>
    <ul>
      <li>Departure:</li>
      <li>Destination:</li>
      <li>Travel Date:</li>
    </ul>
    <ul>
      <li>Departure:</li>
      <li>Destination:</li>
      <li>Travel Date:</li>
    </ul>
    <ul>
      <li>Passegers:</li>
    </ul>
  </div>

  <div class="right-col">
    

    <form id="msform" autocomplete="off">
      <!-- progressbar -->
      <!-- fieldsets -->
       <fieldset id="drop-off">
        <h2 class="fs-title">Select a car</h2>
        <h3 class="fs-subtitle">Select </h3>
        <div id="cars-list">
          <ul>
            <li>
              <div class="car-card car">
        
                <div class="row">
                    <h1 class="car-title">Private Taxi</h1>
                  <div class="col-xs-4">
                     <div class="car-photo">
                      <img src="http://seminovoscarros.com.br/wp-content/uploads/2016/09/Fiat-Uno-2-.jpg" alt="car1">
                    </div>
                  </div>

                  <div class="col-xs-6">
                    <div class="car-infos">
                      

                      <div class="car-specs">
                        <div class="row">
                          <div class="col-xs-6">
                            5 passegers
                          </div>
                          <div class="col-xs-6">
                            2 medium suitcases
                          </div>
                          <div class="col-xs-6">
                            Door to door
                          </div>
                          <div class="col-xs-6">
                            1 hour
                          </div>
                        </div>
                      </div>

                    </div>
                  </div>
                   <div class="col-xs-2">
                     <div class="car-prices">
                      <h1 class="car-price">52 â‚¬<br>
                        <small>Return Price</small></h1>
                        <div class="free-cancelation"></div>
                        <div class="zero-fees"></div>
                    </div>
                  </div>
                </div>


              </div>
            </li>
          </ul>
        </div>
        <input type="button" name="previous" class="previous action-button" value="Previous" />
        <input type="button" name="next" class="next action-button" value="Next" />
      </fieldset>

      <fieldset>
        <h2 class="fs-title">Pick you up</h2>
        <h3 class="fs-subtitle">Departure</h3>
        <input type="text" name="departure" id="depart" placeholder="Where we can pick you?" />
        <input type="hidden" id="origin" name="origin" required>
        
       <select name="" id="" class="">
         <option value="1">1 traveler</option>
         <option value="2" selected>2 travelers</option>
         <option value="3">3 travelers</option>
         <option value="4">4 travelers</option>
         <option value="5">5 travelers</option>
         <option value="6">6 travelers</option>
         <option value="7">7 travelers</option>
         <option value="8">8 travelers</option>
         <option value="9">9 travelers</option>
         <option value="10">10 travelers</option>
         <option value="11">> 10 travelers</option>
       </select>
        <input type="text" name="date" id="date" data-language="en" placeholder="When's your depart?" />
        <input type="text" name="hour" placeholder="Best time to pick the travelers" />
       
        <input type="button" name="next" class="next action-button" value="Next" />
         <div id="result"></div>
      </fieldset>

      <fieldset id="drop-off">
        <h2 class="fs-title">Drop off</h2>
        <h3 class="fs-subtitle">Arrival</h3>
        <input type="text" name="arrival" id="arrival" placeholder="What's your destination?" />
        <input type="hidden" id="destination" name="destination" required>
        <div id="map"></div>
        
        <p>Estimated travel distance: <span class="info-text info-text-default" id="distance">Pick your destination.</span></p>

        <p>Estimated travel time: <span class="info-text  info-text-default" id="duration">Pick your destination.</span></p>


        <!--
        <input type="text" name="distance" id="distance" placeholder="Pick a destination." />
        <input type="text" name="time" id="duration" placeholder="Estimated travel time" />
        -->
        <input type="button" name="previous" class="previous action-button" value="Previous" />
        <input type="button" name="next" class="next action-button" value="Next" />
      </fieldset>

     

      <fieldset>
        <h2 class="fs-title">Personal Details</h2>
        <h3 class="fs-subtitle">We will never sell it</h3>
        <input type="text" name="fname" placeholder="First Name" />
        <input type="text" name="lname" placeholder="Last Name" />
        <input type="text" name="phone" placeholder="Phone" />
        <textarea name="address" placeholder="Address"></textarea>
        <input type="button" name="previous" class="previous action-button" value="Previous" />
        <input type="button" name="next" class="next action-button" value="Next" />
      </fieldset>

      <fieldset>
        <h2 class="fs-title">Review & Submit</h2>
        <h3 class="fs-subtitle">We will never sell it</h3>
        <input type="text" name="fname" placeholder="First Name" />
        <input type="text" name="lname" placeholder="Last Name" />
        <input type="text" name="phone" placeholder="Phone" />
        <textarea name="address" placeholder="Address"></textarea>
        <input type="button" name="previous" class="previous action-button" value="Previous" />
        <input type="button" name="next" class="next action-button" value="Next" />
      </fieldset>

      <fieldset>
        <h2 class="fs-title">Payment</h2>
        <h3 class="fs-subtitle">We will never sell it</h3>
        <input type="text" name="fname" placeholder="First Name" />
        <input type="text" name="lname" placeholder="Last Name" />
        <input type="text" name="phone" placeholder="Phone" />
        <textarea name="address" placeholder="Address"></textarea>
        <input type="button" name="previous" class="previous action-button" value="Previous" />
        <input type="submit" name="submit" class="submit action-button" value="Submit" />
      </fieldset>
    </form>
  </div>

</div>


  <script
  src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/3.3.0/js/bootstrap.min.js"></script>
  <!-- Latest compiled and minified JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.3/jquery.easing.min.js"></script>
  <script src="assets/air-datepicker/dist/js/datepicker.min.js"></script>
    <!-- Include English language -->
    <script src="assets/air-datepicker/dist/js/i18n/datepicker.en.js"></script>

<script src="js/app.js"></script>
    <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCX_UHJYjvGoKAfP94IaPnI9rxMkU06LFo&libraries=places"></script>
<script>
  var directionsDisplay = new google.maps.DirectionsRenderer();
  var directionsService = new google.maps.DirectionsService();

  var map;

  var lisbonAirport = new google.maps.LatLng('38.7711645','-9.08180');

  var mapOptions = {
    zoom : 14,
    center : lisbonAirport
  }

  map = new google.maps.Map(document.getElementById('map'),mapOptions);


  directionsDisplay.setMap(map);

      function calculateRoute(){
        origin = $('#origin').val();
        destination = $('#destination').val();
            var request = {
              origin: origin,
              destination : destination,
              travelMode: 'DRIVING'
            };

            directionsService.route(request, function(result,status){
              if(status == 'OK'){
                directionsDisplay.setDirections(result);
              }
            })
        
      }



  $(function() {
      //listeners
      google.maps.event.addDomListener(window,'load',function(){

        var from_places = new google.maps.places.Autocomplete(document.getElementById('depart'));
        var to_places = new google.maps.places.Autocomplete(document.getElementById('arrival'));
      
        //when from_places changes, will trigger this listener
        google.maps.event.addListener(from_places,'place_changed', function(){
          
          var from = from_places.getPlace();
          var from_address = from.formatted_address;
         
          $('#origin').val(from_address); 

        })

        //when to_places changes, will trigger this listener
        google.maps.event.addListener(to_places,'place_changed', function(){
         
          var to = to_places.getPlace();
          var to_address = to.formatted_address;
   
          $('#destination').val(to_address); 

          
          calculateDistance();
          calculateRoute();

        })

      });


      function calculateDistance(){
        var origin = $('#origin').val();
        var destination = $('#destination').val();
        var service = new google.maps.DistanceMatrixService();
        service.getDistanceMatrix(
        {
          origins: [origin],
          destinations : [destination],
          travelMode : google.maps.TravelMode.DRIVING,
          unitSystem: google.maps.UnitSystem.metric,
          avoidHighways : false,
          avoidTolls: false,
        },callback);
      }

        //get distance results
      function callback(response,status){

          //Check if the status is ok
          if(status != google.maps.DistanceMatrixStatus.OK) {
            err = 'Error';
            $('#result').html(err);
            console.log('Error: '+err);
          } else {
            var origin = response.originAddresses[0];
            var destination = response.destinationAddresses[0];
            
            if(response.rows[0].elements[0].status === 'ZERO_RESULTS'){
              $('#result').html('Better get on a plane. There are no roads between '+origin +' and '+destination+'.');
            } else {
              var distance = response.rows[0].elements[0].distance;
              var duration = response.rows[0].elements[0].duration;

              var distance_in_km = (distance.value / 1000).toFixed(2);
              var duration_text  = duration.text;
              var duration_value = duration.value; //in seconds

              $('#distance').html(distance_in_km+' kms');
              $('#duration').html(duration_text);
            }
          }


          function calculateRoute(){

            var request = {
              origin: origin,
              destination : destination,
              travelMode: 'DRIVING'
            };

            directionsService.route(request, function(result,status){
              console.log(result,status);
            })
        
      }

    
  }
  


        //print results on submit the form
        $('#firstNext').click(function(e){
       
        });

      });
      
    

  

      $('#date').datepicker({
        dateFormat: 'dd/mm/yyyy',
        autoClose : true
      });
      // Access instance of plugin
      $('#date').data('datepicker');


    var componentForm = {
        street_number: 'short_name',
        route: 'long_name',
        locality: 'long_name',
        administrative_area_level_1: 'short_name',
        country: 'long_name',
        postal_code: 'short_name'
      };

      function initAutocomplete() {
        // Create the autocomplete object, restricting the search to geographical
        // location types.
        autocomplete = new google.maps.places.Autocomplete(
            /** @type {!HTMLInputElement} */(document.getElementById('depart')),
            {types: ['geocode']});

        // When the user selects an address from the dropdown, populate the address
        // fields in the form.
        autocomplete.addListener('place_changed', fillInAddress);
      }

     function fillInAddress() {
        // Get the place details from the autocomplete object.
        var place = autocomplete.getPlace();

        for (var component in componentForm) {
          document.getElementById(component).value = '';
          document.getElementById(component).disabled = false;
        }

        // Get each component of the address from the place details
        // and fill the corresponding field on the form.
        for (var i = 0; i < place.address_components.length; i++) {
          var addressType = place.address_components[i].types[0];
          if (componentForm[addressType]) {
            var val = place.address_components[i][componentForm[addressType]];
            document.getElementById(addressType).value = val;
          }
        }
      }


</script>
</body>
</html><!-- multistep form -->
